@model SecureHomeAI_2.Models.User

<div class="form-container">
    <h2>Create Your Account</h2>

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-error">
            @TempData["Error"]
        </div>
    }

    <form method="post" asp-controller="Home" asp-action="Register">
        @Html.AntiForgeryToken()

        <div class="form-group">
            <label asp-for="FullName">Full Name</label>
            <input asp-for="FullName" type="text" required>
            <span asp-validation-for="FullName" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Email">Email Address</label>
            <input asp-for="Email" type="email" required>
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="Password">Password</label>
            <input asp-for="Password" type="password" required>
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label for="confirmPassword">Confirm Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword" required>
            <span id="confirmPasswordError" class="text-danger"></span>
        </div>

        <button type="submit" class="submit-btn">Create Account</button>
    </form>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');

            form.addEventListener('submit', function(e) {
                const password = document.getElementById('Password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                if (password !== confirmPassword) {
                    e.preventDefault();
                    document.getElementById('confirmPasswordError').textContent = 'Passwords do not match';
                    showAlert('Passwords do not match', 'error');
                }
            });

        @if (TempData["Error"] != null)
        {
            <text>
                    showAlert('@TempData["Error"]', 'error');
            </text>
        }
        });
    </script>
}